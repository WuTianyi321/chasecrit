# 实验结果：临界性验证（噪声 `angle_noise` 作为控制参）

本实验将“临界性”定义为一个**相对干净的相变识别设置**中的高涨落区域，并检验：在追逃任务中，把参数调到更接近该临界区域是否能提升逃跑者集群的任务表现。

## 1. 关键结论（摘要）

1. 在“无追捕者、无安全区、仅保留对齐 + 排斥 + 角噪声”的相变识别设置中（实验 A，`seeds=100`，`steps=1200`），临界性代理指标 `χ = N_e · Var_t(P(t))` 的峰值出现在 `angle_noise≈1.8 rad` 附近；同时，局部代理指标 `χ_local = N_e·Var(P_local)` 的峰值更靠近 `angle_noise≈1.4 rad`，表明“临界性”在不同代理指标下可能对应不同的区域。
2. 在追逃任务设置中（实验 B1/B2，固定 `N_p=2`、`speed_ratio=1.1`，分别取 `w_align=0.6` 与 `w_align=1.0`，均为 `seeds=100`、`steps=600`），`safe_frac` 的最优区域稳定出现在**低噪声**（`angle_noise≈0~0.2 rad`），而非相变识别设置的“临界噪声”附近（`≈1.8 rad`）。在当前任务机制下，“更接近相变识别设置中的临界区（更大 χ 或更大 χ_local）”并未带来更好的逃脱效果。
3. 引入额外观测指标（`χ_local`、`ξ`、`components`、`τ`）后，上述结论依然成立：在任务中，噪声升高会显著降低 `safe_frac`，而临界性代理指标在高噪声段的变化并不对应更高任务成功率。

## 2. 指标与定义

- 极化度：`P(t)`，对 episode 内存活逃跑者速度向量求序参量。
- 临界性代理（全局）：`χ = N_e · Var_t(P(t))`（episode 内时间方差，乘以逃跑者数量）。该指标用于定位“高涨落区”，但不等价于严格的临界性证据链。
- 临界性代理（局部）：`χ_local = N_e · Var(P_local)`，其中 `P_local(i)=|Σ_{j∈N_i} v̂_j|/|N_i|`。
- 空间相关长度代理：`ξ`（`xi_fluct`），由速度方向涨落相关随距离的衰减长度估计。
- 相关时间代理：`τ`（`tau_P_ar1`），将 `P(t)` 视为 AR(1) 过程，用 lag-1 自相关 `ρ1` 估计积分相关时间 `τ=(1+ρ1)/(1-ρ1)`。
- 结构代理：`components`，按邻居半径阈值构建图，统计连通分量数量（用于观察“团块化/碎裂”趋势）。

## 3. 实验 A：相变识别（Phase identification）

### 3.1 设置

- 追捕者：禁用（`N_p=0`）
- 安全区：禁用（`K_active_max=0`）
- 逃跑者策略：去除目标/规避/探索驱动，仅保留对齐与排斥，并扫描角噪声
  - `w_align=1.0`
  - `w_goal=w_avoid=w_explore=0`
- 运行：`steps=1200`；`seeds=100`

### 3.2 产物

- 原始 sweep：`runs/sweep_20260206_133544_phase_noise`
- 报告与图：`doc/results_20260206_phase_noise_100seeds_steps1200/report.md`

### 3.3 复现命令

`uv run chasecrit phase-sweep-noise --noise 0 0.2 0.4 0.6 0.8 1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 --seeds 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 --steps 1200 --jobs 8`

## 4. 实验 B：追逃任务中的噪声扫描（Task validation）

实验 B 分为两组：B1（`w_align=0.6`）与 B2（`w_align=1.0`），其余设置一致。

### 4.1 设置（B1/B2 共同）

- 追捕者数量固定：`N_p=2`（追逐策略 `p0_nearest`）
- 扫描变量：
  - `speed_ratio = v_p/v_e = 1.1`
  - `angle_noise ∈ {0, 0.2, ..., 3.0}`（步长 0.2）
- 固定：
  - B1：`w_align = 0.6`
  - B2：`w_align = 1.0`（与相变识别设置一致，便于对照）
  - 其余任务环境与安全区机制保持 base config（多安全区、容量未知、失效即消失、随机刷新）
- 运行：`steps=600`；`seeds=100`

### 4.2 产物

- B1（`w_align=0.6`）
  - 原始 sweep：`runs/sweep_20260206_135213_noise`
  - 报告与图：`doc/results_20260206_task_noise_w06_sr11_100seeds/report.md`
- B2（`w_align=1.0`）
  - 原始 sweep：`runs/sweep_20260206_135744_noise`
  - 报告与图：`doc/results_20260206_task_noise_w10_sr11_100seeds/report.md`

### 4.3 复现命令

- B1：
  - `uv run chasecrit sweep-noise --speed-ratio 1.1 --noise 0 0.2 0.4 0.6 0.8 1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 --seeds 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 --steps 600 --w-align 0.6 --no-save-events --no-save-timeseries --jobs 8`
- B2：
  - `uv run chasecrit sweep-noise --speed-ratio 1.1 --noise 0 0.2 0.4 0.6 0.8 1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 --seeds 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 --steps 600 --w-align 1.0 --no-save-events --no-save-timeseries --jobs 8`

## 5. 原因分析：为什么“更接近临界”没有带来更高 `safe_frac`

该现象在当前任务与指标定义下较为合理，可能原因包括：

1. **临界性定位与任务动力学不一致**  
   实验 A 的“相变识别”去除了目标与威胁驱动，旨在观察纯粹的群体自发有序/无序转变；而实验 B 的追逃任务包含强外场（目标趋向、追捕规避、安全区刷新），会改变群体统计性质与“有效临界点”。因此，“接近 A 中的临界噪声”不必然对应 B 中的最优策略区。

2. **任务目标偏向“稳定、定向、低误差”的运动**  
   在当前安全区机制中，一旦探测到有效安全区，最直接的成功路径是快速、稳定地朝其移动并避免被捕。增加噪声（即使带来更大涨落）往往只会提高路径弯折与时间损失，从而降低 `safe_frac`。

3. **临界性代理指标与任务相关性可能较弱**  
   `χ = N_e·Var_t(P)` 捕捉的是“极化度的时间涨落”。即使加入 `χ_local`、`ξ`、`components`、`τ` 等轻量代理指标，它们也未在当前任务机制下呈现“更接近相变识别设置的临界区 → 更高 `safe_frac`”的稳定耦合关系，提示任务最优更可能由控制精度与稳定定向运动主导。

4. **场景尚未强制触发“临界态可能擅长的权衡”**  
   临界态常被认为擅长平衡“快速共识 vs 保留多样性”。当前任务中，安全区刷新与目标项可能已经提供了足够探索，而主要瓶颈反而是“到达效率与被捕风险”，这更偏向低噪声的稳定控制。

## 6. 下一步验证方向（更贴近临界优势假说）

为更严格检验“临界态是否能提升追逃任务表现”，建议：

1. 先在不同密度/尺寸下做相变识别（有限尺寸分析），定位更稳健的临界区域（而非单次 χ 峰）。
2. 将任务场景改造得更依赖“探索-利用”的动态权衡，例如：
   - 诱饵/假安全区
   - 安全区移动策略更复杂或信号更噪声化
   - 更强的容量稀缺与拥挤惩罚
3. 引入更贴近临界性的观测指标（空间相关长度、事件级联等），并检验其与任务性能的耦合关系。
