# 实验结果：临界性验证（噪声 `angle_noise` 作为控制参）

本实验将“临界性”定义为一个**相对干净的相变识别设置**中的高涨落区域，并检验：在追逃任务中，把参数调到更接近该临界区域是否能提升逃跑者集群的任务表现。

## 0. 分析框架更新：自主临界 vs 受迫有序

在对抗任务中，单看某个“涨落指标变大”不足以判定系统更接近“有利的临界态”。本报告采用双框架解释：

1. **自主临界（autonomous criticality）**  
   在弱外场或无外场下，系统因内部相互作用产生临界特征（高易感性、长相关等）。
2. **受迫有序（forced order）**  
   在强对抗外场下，群体可能被压到更可预测、更单一的运动模式；此时部分统计量可能仍偏高，但行为上更接近“可预测有序态”，而非“可利用的临界态”。

对本项目更关键的问题是：在追逃任务中，哪一种状态更利于逃跑者生存，以及追捕者是否有能力利用逃跑者的可预测性。

## 1. 关键结论（摘要）

1. 在“无追捕者、无安全区、仅保留对齐 + 排斥 + 角噪声”的相变识别设置中（实验 A，`seeds=100`，`steps=1200`），临界性代理指标 `χ = N_e · Var_t(P(t))` 的峰值出现在 `angle_noise≈1.8 rad` 附近；同时，局部代理指标 `χ_local = N_e·Var(P_local)` 的峰值更靠近 `angle_noise≈1.4 rad`，表明“临界性”在不同代理指标下可能对应不同的区域。
2. 在追逃任务设置中（实验 B1/B2，固定 `N_p=2`、`speed_ratio=1.1`，分别取 `w_align=0.6` 与 `w_align=1.0`，均为 `seeds=100`、`steps=600`），`safe_frac` 的最优区域稳定出现在**低噪声**（`angle_noise≈0~0.2 rad`），而非相变识别设置的“临界噪声”附近（`≈1.8 rad`）。
3. 对实验 B2（`w_align=1.0`）做定量相关分析可见，`safe_mean` 与 `chi_mean` 在噪声扫描网格上呈显著正相关（Pearson `r=0.824`，Spearman `rho=0.965`），说明在该任务设定内“临界性代理更强”与“生存率更高”存在同向耦合。
4. 上述正相关结论与“相变识别临界点是否任务最优”并不冲突：B2 中 `chi` 峰值在 `angle_noise=0.0`，`safe` 峰值在 `0.2`，而相变识别设置中的 `chi` 峰值在 `≈1.8`。因此，需区分“任务内相关性”与“跨场景临界点迁移”两类命题。
5. 从“受迫有序”视角看，当前追捕者策略较弱（`p0_nearest`），尚未充分利用逃跑者可预测性；因此在现有设置中，低噪声高一致性未表现为明显劣势。该结论不应外推到更强追捕策略（预测拦截/协作）下。

## 2. 指标与定义

- 极化度：`P(t)`，对 episode 内存活逃跑者速度向量求序参量。
- 临界性代理（全局）：`χ = N_e · Var_t(P(t))`（episode 内时间方差，乘以逃跑者数量）。该指标用于定位“高涨落区”，但不等价于严格的临界性证据链。
- 临界性代理（局部）：`χ_local = N_e · Var(P_local)`，其中 `P_local(i)=|Σ_{j∈N_i} v̂_j|/|N_i|`。
- 空间相关长度代理：`ξ`（`xi_fluct`），由速度方向涨落相关随距离的衰减长度估计。
- 相关时间代理：`τ`（`tau_P_ar1`），将 `P(t)` 视为 AR(1) 过程，用 lag-1 自相关 `ρ1` 估计积分相关时间 `τ=(1+ρ1)/(1-ρ1)`。
- 结构代理：`components`，按邻居半径阈值构建图，统计连通分量数量（用于观察“团块化/碎裂”趋势）。

## 3. 实验 A：相变识别（Phase identification）

### 3.1 设置

- 追捕者：禁用（`N_p=0`）
- 安全区：禁用（`K_active_max=0`）
- 逃跑者策略：去除目标/规避/探索驱动，仅保留对齐与排斥，并扫描角噪声
  - `w_align=1.0`
  - `w_goal=w_avoid=w_explore=0`
- 运行：`steps=1200`；`seeds=100`

### 3.2 产物

- 原始 sweep：`runs/sweep_20260206_133544_phase_noise`
- 报告与图：`doc/results_20260206_phase_noise_100seeds_steps1200/report.md`

### 3.3 复现命令

`uv run chasecrit phase-sweep-noise --noise 0 0.2 0.4 0.6 0.8 1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 --seeds 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 --steps 1200 --jobs 8`

## 4. 实验 B：追逃任务中的噪声扫描（Task validation）

实验 B 分为两组：B1（`w_align=0.6`）与 B2（`w_align=1.0`），其余设置一致。

### 4.1 设置（B1/B2 共同）

- 追捕者数量固定：`N_p=2`（追逐策略 `p0_nearest`）
- 扫描变量：
  - `speed_ratio = v_p/v_e = 1.1`
  - `angle_noise ∈ {0, 0.2, ..., 3.0}`（步长 0.2）
- 固定：
  - B1：`w_align = 0.6`
  - B2：`w_align = 1.0`（与相变识别设置一致，便于对照）
  - 其余任务环境与安全区机制保持 base config（多安全区、容量未知、失效即消失、随机刷新）
- 运行：`steps=600`；`seeds=100`

### 4.2 产物

- B1（`w_align=0.6`）
  - 原始 sweep：`runs/sweep_20260206_135213_noise`
  - 报告与图：`doc/results_20260206_task_noise_w06_sr11_100seeds/report.md`
- B2（`w_align=1.0`）
  - 原始 sweep：`runs/sweep_20260206_135744_noise`
  - 报告与图：`doc/results_20260206_task_noise_w10_sr11_100seeds/report.md`

### 4.3 复现命令

- B1：
  - `uv run chasecrit sweep-noise --speed-ratio 1.1 --noise 0 0.2 0.4 0.6 0.8 1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 --seeds 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 --steps 600 --w-align 0.6 --no-save-events --no-save-timeseries --jobs 8`
- B2：
  - `uv run chasecrit sweep-noise --speed-ratio 1.1 --noise 0 0.2 0.4 0.6 0.8 1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 --seeds 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 --steps 600 --w-align 1.0 --no-save-events --no-save-timeseries --jobs 8`

### 4.4 B2（`w_align=1.0`）的补充定量讨论

- 数据来源：`doc/results_20260206_task_noise_w10_sr11_100seeds/group_summary.csv`
- 相关性（按噪声格点聚合）：
  - `corr_Pearson(safe_mean, chi_mean)=0.824`
  - `corr_Spearman(safe_mean, chi_mean)=0.965`
- 峰值位置：
  - `safe_mean` 最大：`angle_noise=0.2`，`safe_mean=0.3387`
  - `chi_mean` 最大：`angle_noise=0.0`，`chi_mean=4.2378`
- 解释：该结果支持“在该任务 sweep 内，低噪声区域同时对应更高生存率与更高 `chi`”，因此“临界性越强生存率越高”在该特定定义与设定下具备经验支持；但它仍不能单独证明“相变识别设置中的临界点（`≈1.8`）可直接迁移为任务最优点”。

## 5. 受迫有序视角下的重解读

在当前任务与指标定义下，可将结果解释为：

1. **相变识别结论不能直接迁移到对抗任务**  
   实验 A 识别的是弱外场条件下的自主相变；实验 B 存在目标、追捕和安全区刷新等外场，系统所处状态可被外界塑形。

2. **当前任务奖励“稳定可控”而非“高探索涨落”**  
   在现有规则下，发现安全区后的低误差定向推进是主要收益来源，高噪声会增大路径弯折和时间损失。

3. **“任务内正相关”可由受迫有序主导**  
   在 B2 中，`safe` 与 `χ` 正相关主要发生在低噪声端；该区域同时体现更高一致性和更低碎裂，可能是受迫条件下的有序高效运动，而不一定是“临界优势”。

4. **追捕者强度不足以显化“可预测性惩罚”**  
   当前 `p0_nearest` 尚不具备强预测拦截能力，难以把逃跑者的可预测运动转化为系统性压制。因此低噪声策略暂时不吃亏。

## 5.1 与 `w_align` 主线（任务内判定）的交叉一致性

最新 `w_align` 扫描（见 `doc/results_20260206_walign_task_internal_200seeds/report.md` 与 `doc/results_20260206_walign_pressure_091314_sr14_240seeds/report.md`）给出以下与本报告一致的趋势：

1. 在 `v_p/v_e=1.0~1.3` 区间，`safe` 与任务内 `chi` 多为正相关，说明“更临界（任务内统计意义）”可以对应更好的生存表现。  
2. 在更高压力 `v_p/v_e=1.4` 下，`corr(safe,chi)` 接近 0，且 `w_safe` 与 `w_chi` 明显分离，提示“近临界优势”并不在所有对抗强度下成立。  
3. 因此，“噪声相变设置的临界噪声是否任务最优”与“任务内部更高 `chi` 是否更有利”需要继续分开报告：
   - 前者目前不成立（临界噪声未迁移为任务最优）。
   - 后者在部分任务区间成立（尤其非极端高压下）。

## 6. 下一步验证方向（更贴近临界优势假说）

为更严格检验“临界态是否能提升追逃任务表现”，建议：

1. 在固定任务场景下优先推进“自主性参数路线”（扫描 `w_align`/邻居依赖强度），并与 `χ`、`χ_local`、`τ`、`ξ` 联动分析，检验是否存在“中间自主性最优且更接近临界代理峰值”的稳定区间。
2. 引入更强追捕者（预测拦截、协作分工）并重复噪声/自主性扫描，直接测试“可预测性是否被利用”。
3. 先在不同密度/尺寸下做相变识别（有限尺寸分析），定位更稳健的临界区域（而非单次 χ 峰）。
4. 将任务场景改造得更依赖“探索-利用”的动态权衡，例如：
   - 诱饵/假安全区
   - 安全区移动策略更复杂或信号更噪声化
   - 更强的容量稀缺与拥挤惩罚
5. 引入更贴近临界性的观测指标（空间相关长度、事件级联等），并检验其与任务性能的耦合关系。
